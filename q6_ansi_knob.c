// Copyright 2022 Vino Rodrigues (@vinorodrigues)
// SPDX-License-Identifier: GPL-3.0-or-later

#include "quantum.h"

/* ----- RGB Matrix ----- */

#ifdef RGB_MATRIX_ENABLE

const ckled2001_led PROGMEM g_ckled2001_leds[DRIVER_LED_TOTAL] = {
/* Refer to IS31 manual for these locations
 *   driver
 *   |  R location
 *   |  |       G location
 *   |  |       |       B location
 *   |  |       |       | */
    {0, I_1,    G_1,    H_1},
    {0, I_2,    G_2,    H_2},
    {0, I_3,    G_3,    H_3},
    {0, I_4,    G_4,    H_4},
    {0, I_5,    G_5,    H_5},
    {0, I_6,    G_6,    H_6},
    {0, I_7,    G_7,    H_7},
    {0, I_8,    G_8,    H_8},
    {0, I_9,    G_9,    H_9},
    {0, I_10,   G_10,   H_10},
    {0, I_11,   G_11,   H_11},
    {0, I_12,   G_12,   H_12},
    {0, I_13,   G_13,   H_13},
    {0, I_15,   G_15,   H_15},
    {0, I_16,   G_16,   H_16},
    {0, L_5,    J_5,    K_5},
    {0, L_6,    J_6,    K_6},
    {0, L_7,    J_7,    K_7},
    {0, L_8,    J_8,    K_8},
    {0, L_4,    J_4,    K_4},

    {0, C_1,    A_1,    B_1},
    {0, C_2,    A_2,    B_2},
    {0, C_3,    A_3,    B_3},
    {0, C_4,    A_4,    B_4},
    {0, C_5,    A_5,    B_5},
    {0, C_6,    A_6,    B_6},
    {0, C_7,    A_7,    B_7},
    {0, C_8,    A_8,    B_8},
    {0, C_9,    A_9,    B_9},
    {0, C_10,   A_10,   B_10},
    {0, C_11,   A_11,   B_11},
    {0, C_12,   A_12,   B_12},
    {0, C_13,   A_13,   B_13},
    {0, C_14,   A_14,   B_14},
    {0, C_15,   A_15,   B_15},
    {0, C_16,   A_16,   B_16},
    {0, L_9,    J_9,    K_9},
    {0, L_10,   J_10,   K_10},
    {0, L_11,   J_11,   K_11},
    {0, L_12,   J_12,   K_12},
    {0, L_13,   J_13,   K_13},

    {0, F_1,    D_1,    E_1},
    {0, F_2,    D_2,    E_2},
    {0, F_3,    D_3,    E_3},
    {0, F_4,    D_4,    E_4},
    {0, F_5,    D_5,    E_5},
    {0, F_6,    D_6,    E_6},
    {0, F_7,    D_7,    E_7},
    {0, F_8,    D_8,    E_8},
    {0, F_9,    D_9,    E_9},
    {0, F_10,   D_10,   E_10},
    {0, F_11,   D_11,   E_11},
    {0, F_12,   D_12,   E_12},
    {0, F_13,   D_13,   E_13},
    {0, F_14,   D_14,   E_14},
    {0, F_15,   D_15,   E_15},
    {0, F_16,   D_16,   E_16},
    {0, L_14,   J_14,   K_14},
    {0, L_15,   J_15,   K_15},
    {0, L_16,   J_16,   K_16},
    {1, L_1,    J_1,    K_1},
    {1, L_2,    J_2,    K_2},  // +

    {1, C_16,   A_16,   B_16},
    {1, C_15,   A_15,   B_15},
    {1, C_14,   A_14,   B_14},
    {1, C_13,   A_13,   B_13},
    {1, C_12,   A_12,   B_12},
    {1, C_11,   A_11,   B_11},
    {1, C_10,   A_10,   B_10},
    {1, C_9,    A_9,    B_9},
    {1, C_8,    A_8,    B_8},
    {1, C_7,    A_7,    B_7},
    {1, C_6,    A_6,    B_6},
    {1, C_5,    A_5,    B_5},
    {1, C_3,    A_3,    B_3},
    {1, L_3,    J_3,    K_3},
    {1, L_4,    J_4,    K_4},
    {1, L_5,    J_5,    K_5},

    {1, I_16,   G_16,   H_16},
    {1, I_14,   G_14,   H_14},
    {1, I_13,   G_13,   H_13},
    {1, I_12,   G_12,   H_12},
    {1, I_11,   G_11,   H_11},
    {1, I_10,   G_10,   H_10},
    {1, I_9,    G_9,    H_9},
    {1, I_8,    G_8,    H_8},
    {1, I_7,    G_7,    H_7},
    {1, I_6,    G_6,    H_6},
    {1, I_5,    G_5,    H_5},
    {1, I_3,    G_3,    H_3},
    {1, I_1,    G_1,    H_1},
    {1, L_6,    J_6,    K_6},
    {1, L_7,    J_7,    K_7},
    {1, L_8,    J_8,    K_8},
    {1, L_9,    J_9,    K_9},  // n_ent

    {1, F_16,   D_16,   E_16},
    {1, F_15,   D_15,   E_15},
    {1, F_14,   D_14,   E_14},
    {1, F_10,   D_10,   E_10},
    {1, F_6,    D_6,    E_6},
    {1, F_5,    D_5,    E_5},
    {1, F_4,    D_4,    E_4},
    {1, F_3,    D_3,    E_3},
    {1, F_2,    D_2,    E_2},
    {1, F_1,    D_1,    E_1},
    {1, L_10,   J_10,   K_10},
    {1, L_11,   J_11,   K_11},
    {1, L_12,   J_12,   K_12},
};

#define __ NO_LED

/**
 * Generated from: https://xelus.netlify.app/guides/KLE_to_RGB_parser
 *
 * KLE =
    [{y:-0.5,c:"#777777"},"0,0",{x:0.25,c:"#cccccc"},"0,1","0,2","0,3","0,4",{x:0.25},"0,5","0,6","0,7","0,8",{x:0.25},"0,9","0,10","0,11","0,12",{x:1.5,c:"#aaaaaa"},"0,14","0,15","0,16",{x:0.25,c:"#cccccc"},"0,19","1,19","2,19","3,19"],
    [{y:0.25},"1,0","1,1","1,2","1,3","1,4","1,5","1,6","1,7","1,8","1,9","1,10","1,11","1,12",{c:"#aaaaaa",w:2},"1,13",{x:0.25},"1,14","1,15","1,16",{x:0.25},"1,17",{c:"#cccccc"},"1,18","0,17","0,18"],
    [{c:"#aaaaaa",w:1.5},"2,0",{c:"#cccccc"},"2,1","2,2","2,3","2,4","2,5","2,6","2,7","2,8","2,9","2,10","2,11","2,12",{w:1.5},"2,13",{x:0.25,c:"#aaaaaa"},"2,14","2,15","2,16",{x:0.25,c:"#cccccc"},"2,17","2,18","3,14",{h:2},"3,15"],
    [{c:"#aaaaaa",w:1.75},"3,0",{c:"#cccccc"},"3,1","3,2","3,3","3,4","3,5","3,6","3,7","3,8","3,9","3,10","3,11",{c:"#777777",w:2.25},"3,13",{x:3.5,c:"#cccccc"},"3,17","3,18","3,16"],
    [{c:"#aaaaaa",w:2.25},"4,0",{c:"#cccccc"},"4,2","4,3","4,4","4,5","4,6","4,7","4,8","4,9","4,10","4,11",{c:"#aaaaaa",w:2.75},"4,13",{x:1.25,c:"#777777"},"4,15",{x:1.25,c:"#cccccc"},"4,17","4,18","4,14",{c:"#777777",h:2},"4,16"],
    [{c:"#aaaaaa",w:1.25},"5,0",{w:1.25},"5,1",{w:1.25},"5,2",{c:"#cccccc",w:6.25},"5,6",{c:"#aaaaaa",w:1.25},"5,10",{w:1.25},"5,11",{w:1.25},"5,12",{w:1.25},"5,13",{x:0.25,c:"#777777"},"5,14","5,15","5,16",{x:0.25,c:"#cccccc",w:2},"5,17","5,18"]
 *
 * LAYOUT =
    #define LAYOUT_all( \
        K00, K01, K02, K03, K04, K05, K06, K07, K08, K09, K0A, K0B, K0C,       K0E,  K0F, K0G, K0J, K1J, K2J, K3J, \
        K10, K11, K12, K13, K14, K15, K16, K17, K18, K19, K1A, K1B, K1C, K1D,  K1E,  K1F, K1G, K1H, K1I, K0H, K0I, \
        K20, K21, K22, K23, K24, K25, K26, K27, K28, K29, K2A, K2B, K2C, K2D,  K2E,  K2F, K2G, K2H, K2I, K3E,      \
        K30, K31, K32, K33, K34, K35, K36, K37, K38, K39, K3A, K3B,      K3D,                  K3H, K3I, K3G, K3F, \
        K40,      K42, K43, K44, K45, K46, K47, K48, K49, K4A, K4B,      K4D,        K4F,      K4H, K4I, K4E,      \
        K50, K51, K52,                K56,                K5A, K5B, K5C, K5D,  K5E,  K5F, K5G, K5H,      K5I, K4G  \
    ) { \
        { K00, K01, K02, K03, K04, K05, K06, K07, K08, K09, K0A, K0B, K0C, KC_NO, K0E, K0F, K0G, K0H, K0I, K0J }, \
        { K10, K11, K12, K13, K14, K15, K16, K17, K18, K19, K1A, K1B, K1C, K1D, K1E, K1F, K1G, K1H, K1I, K1J }, \
        { K20, K21, K22, K23, K24, K25, K26, K27, K28, K29, K2A, K2B, K2C, K2D, K2E, K2F, K2G, K2H, K2I, K2J }, \
        { K30, K31, K32, K33, K34, K35, K36, K37, K38, K39, K3A, K3B, KC_NO, K3D, K3E, K3F, K3G, K3H, K3I, K3J }, \
        { K40, KC_NO, K42, K43, K44, K45, K46, K47, K48, K49, K4A, K4B, KC_NO, K4D, K4E, K4F, K4G, K4H, K4I, KC_NO }, \
        { K50, K51, K52, KC_NO, KC_NO, KC_NO, K56, KC_NO, KC_NO, KC_NO, K5A, K5B, K5C, K5D, K5E, K5F, K5G, K5H, K5I, KC_NO }  \
    }
 */

led_config_t g_led_config = {
    {
        {  0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11,  12,  __,  13,  14,  15,  39,  40, 16 },
        { 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31,  32,  33,  34,  35,  36,  37,  38, 17 },
        { 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52,  53,  54,  55,  56,  57,  58,  59, 18 },
        { 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72,  __,  73,  60,  77,  76,  74,  75, 19 },
        { 78, __, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88,  __,  89,  93,  90, 107,  91,  92, __ },
        { 94, 95, 96, __, __, __, 97, __, __, __, 98, 99, 100, 101, 102, 103, 104, 105, 106, __ }
    }, {
        {  0,0  }, { 13,0  }, { 23,0  }, { 34,0  }, { 44,0  }, { 57,0  }, { 68,0  }, { 78,0  }, { 89,0  }, {102,0  }, {112,0  }, {122,0  }, {133,0  },            {159,0  }, {169,0  }, {180,0  }, {193,0  }, {203,0  }, {214,0  }, {224,0  },
        {  0,15 }, { 10,15 }, { 21,15 }, { 31,15 }, { 42,15 }, { 52,15 }, { 63,15 }, { 73,15 }, { 83,15 }, { 94,15 }, {104,15 }, {115,15 }, {125,15 }, {141,15 }, {159,15 }, {169,15 }, {180,15 }, {193,15 }, {203,15 }, {214,15 }, {224,15 },
        {  3,27 }, { 16,27 }, { 26,27 }, { 36,27 }, { 47,27 }, { 57,27 }, { 68,27 }, { 78,27 }, { 89,27 }, { 99,27 }, {109,27 }, {120,27 }, {130,27 }, {143,27 }, {159,27 }, {169,27 }, {180,27 }, {193,27 }, {203,27 }, {214,27 }, {224,34 },
        {  4,40 }, { 18,40 }, { 29,40 }, { 39,40 }, { 49,40 }, { 60,40 }, { 70,40 }, { 81,40 }, { 91,40 }, {102,40 }, {112,40 }, {122,40 },            {139,40 },                                  {193,40 }, {203,40 }, {214,40 },
        {  7,52 },            { 23,52 }, { 34,52 }, { 44,52 }, { 55,52 }, { 65,52 }, { 76,52 }, { 86,52 }, { 96,52 }, {107,52 }, {117,52 },            {137,52 },            {169,52 },            {193,52 }, {203,52 }, {214,52 }, {224,58 },
        {  1,64 }, { 14,64 }, { 27,64 },                                  { 66,64 },                                  {105,64 }, {119,64 }, {132,64 }, {145,64 }, {159,64 }, {169,64 }, {180,64 }, {198,64 },            {214,64 }

    }, {
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,      1, 1, 1,   1, 1, 1, 1,
        4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 1,   1, 1, 1,   9, 4, 4, 4,
        1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,   1, 1, 1,   4, 4, 4, 4,
        9, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,    1,              4, 4, 4,
        1,    4, 4, 4, 4, 4, 4, 4, 4, 4, 4,    1,      1,      4, 4, 4, 1,
        1, 1, 1,          4,          1, 1, 1, 1,   1, 1, 1,   4,    4
    }
};

#endif  // RGB_MATRIX_ENABLE
